<div class="section-title"><h2>Pengaturan Sistem</h2></div>
<div class="glass card">
  <div class="form-row">
    <label>Nama Organisasi<input id="sNama"></label>
    <label>Deskripsi<textarea id="sDesk" rows="2"></textarea></label>
    <label>Logo<input id="sLogo" type="file" accept="image/*"></label>
    <label>Mode Gelap<select id="sDark"><option value="auto">Auto</option><option value="on">On</option><option value="off">Off</option></select></label>
  </div>
  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px"><button class="btn" id="btnSaveSettings">Simpan</button></div>
</div>
<script>
async function boot_pengaturan(){
  const docRef=firebase.firestore().collection('settings').doc('main');
  async function load(){const d=await docRef.get(); const s=d.data()||{}; document.getElementById('sNama').value=s.nama||''; document.getElementById('sDesk').value=s.deskripsi||''; document.getElementById('sDark').value=s.darkMode||'auto';}
  load();
  document.getElementById('btnSaveSettings').onclick=async()=>{
    let logoURL=null; const file=document.getElementById('sLogo').files[0]; if(file){logoURL=await uploadImage(file);}
    await docRef.set({nama:document.getElementById('sNama').value,deskripsi:document.getElementById('sDesk').value,darkMode:document.getElementById('sDark').value,...(logoURL?{logoURL}:{})},{merge:true});
    alert('Pengaturan disimpan');
  };
}
</script>
